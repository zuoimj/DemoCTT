﻿@model VNPRECRUITMENT.Models.Job
@{
    ViewBag.Title = "Chỉnh sửa công việc";
}
<style>
    .btn-active {
        background-color: #ABBAC3 !important;
    }
</style>
<script src="@Url.Content(" ~ />Resources/plugins/ckfinder/ckfinder.js")" type="text/javascript"></script>
<div class="page-header">
    <h1>@ViewBag.title</h1>
</div>

@*@Html.AntiForgeryToken()*@
<div class="row">
    <div class="col-md-12">
        <form class="form-horizontal" role="form" action="@Url.Action("Edit")" method="post">

            @foreach (var item in ViewBag.SelectJob)
            {

                <input type="hidden" name="id" value="@item.JOB_ID" />
                <div class="form-group">
                    <label class="col-sm-2 control-label">Phòng ban: </label>
                    <div class="col-sm-10">
                        @if (ViewBag.GroupList != null)
                        {
                            @Html.DropDownList("Group_ID", (IEnumerable<SelectListItem>
                        )ViewBag.GroupList, "Phòng ban", new { @class = "form-control search-select", data_style = "btn-primary", aria_expanded = "false", id = "Group_ID" })
                        }
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">Tên công việc</label>
                    <div class="col-sm-10">
                        <input type="text" name="Job_name" maxlength="500" id="Job_name" value="@item.JOB_NAME" placeholder="Nhập tên công việc" class="form-control" oninvalid="alert('Bạn phải nhập tên công việc!');" required>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label" for="form-field-1">Trạng thái: </label>
                    <div class="col-sm-10">
                        <select class="form-control search-select" id="status" name="status" oninvalid="alert('Bạn phải chọn trạng thái!');" required>
                            @if (item.JOB_STATUS == 1)
                            {
                                <option value="1" selected="selected">Xuất bản</option>
                                <option value="2">Lưu nháp</option>
                            }
                            else if (item.JOB_STATUS == 2)
                            {
                                <option value="1">Xuất bản</option>
                                <option value="2" selected="selected">Lưu nháp</option>
                            }


                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label class="col-sm-2 control-label">Số Lượng: </label>
                    <div class="col-sm-10">
                        <input type="number" name="Number" id="Number" value="@item.NUMBER" placeholder="Nhập số lượng tuyển dụng" oninvalid="alert('Bạn phải nhập số lượng tuyển dụng!');" class="form-control" required>
                    </div>
                </div>

                @*<div class="form-group">
                        <label class="col-sm-2 control-label">Lương: </label>
                        <div class="col-sm-10">
                            <input type="text" name="Salary" id="Salary" value="@Model.SALARY" placeholder="Nhập mức lương" class="form-control" oninvalid="alert('Bạn phải nhập mức lương!');" required>
                        </div>
                    </div>*@
                <div class="form-group">
                    <label class="col-sm-2 control-label">Ngày hết hạn: </label>
                    <div class="col-sm-10">
                        <input type="text" name="Expired_Date" id="datepicker" value="@item.EXPIRED_DATE1" class="form-control">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Khu vực: </label>
                    <div class="col-sm-10">
                        <select style="width: 755px; height:auto;" class="js-example-basic-multiple" name="Location_Name" multiple="multiple">
                            @{
                                VNPRECRUITMENT.Models.VNPAY_RECRUITMENTEntities Dbcontext = new VNPRECRUITMENT.Models.VNPAY_RECRUITMENTEntities();
                                var location_name = Dbcontext.PROC_LOCATION_NAME_SELECTALL123(item.JOB_ID);
                                List<string> rs = new List<string>();
                                foreach (var item_location in location_name)
                                {
                                    <option value="@item_location.LOCATION_ID" selected="selected">@item_location.LOCATION_NAME</option>
                                }

                            }
                            @foreach (var location in ViewBag.LocationList)
                            {
                                <option value="@location.LOCATION_ID">@location.LOCATION_NAME</option>
                            }
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Upload ảnh:<span style="color: red">*</span></label>
                    <div class="col-sm-8">
                        <div>
                            <input type="text" value="@item.IMAGE" class="form-control" id="PostThumbnail" name="image">
                        
                        </div>
                    </div>
                    <div>
                        <button class="btn btn-blue btn-sm" id="btnSelectImg" name="btnSelectImg"><i class="glyphicon glyphicon-folder-open"></i><span class="hidden-xs">&nbsp;Chọn ảnh</span></button>
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-2"></div>
                    <div class="col-sm-8"><img width="300px" src="@item.IMAGE" /></div>
                    
                </div>
                <div class="form-group">
                    <label class="col-sm-2 control-label">Nội dung </label>
                    <div class="col-sm-10">
                        <textarea name="Job_Description" id="Job_Description" oninvalid="alert('Bạn phải nhập mô tả công việc!');" required>@item.JOB_DECRIPTION</textarea>
                        <script type="text/javascript">
                            CKEDITOR.replace('Job_Description',
                        {
                            filebrowserBrowseUrl: '/tuyen-dung/Resources/plugins/ckfinder/ckfinder.html',
                            filebrowserImageBrowseUrl: '/tuyen-dung/Resources/plugins/ckfinder/ckfinder.html?Type=CmsImages',
                            filebrowserFlashBrowseUrl: '/tuyen-dung/Resources/plugins/ckfinder/ckfinder.html?Type=Flash',
                            filebrowserUploadUrl: '/tuyen-dung/Resources/plugins/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Files',
                            filebrowserImageUploadUrl: '/tuyen-dung/Resources/plugins/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Images',
                            filebrowserFlashUploadUrl: '/tuyen-dung/Resources/plugins/ckfinder/core/connector/aspx/connector.aspx?command=QuickUpload&type=Flash'
                        });
                        </script>
                    </div>
                </div>
                <div class="clear"></div>
                <div class="clearfix form-actions center">
                    <button type="submit" class="btn btn-primary btn-sm">Chỉnh sửa</button>
                    <a href="@Url.Action("Index", "Jobs" )" class="btn btn-dark-grey btn-sm">Hủy bỏ</a>
                </div>
                <script>
                    $("commentForm").validate();
                </script>
            }
        </form>
    </div>
</div>

@section scripts{
    <link href="~/Resources/select2/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
    <script src="//code.jquery.com/jquery-1.10.2.js"></script>
    <script src="~/Resources/js/jquery-ui.js"></script>
    <script src="~/Resources/select2/dist/js/select2.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#btn_vi').focus();
            $("#btnSelectImg").click(function () {
                var finder = new CKFinder();
                finder.selectActionFunction = function (fileUrl) {
                    $('#PostThumbnail').val(fileUrl);
                };
                finder.popup();
                return false;
            });
        });
    </script>
    


    <script>
        $(function () {
            $("#datepicker").datepicker({ dateFormat: 'dd-MM-yy' });
        });

        $(document).ready(function () {
            $('.js-example-basic-multiple').select2();
        });
    </script>
    

   
}
